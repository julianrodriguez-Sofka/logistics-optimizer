# SonarCloud Configuration for Logistics Optimizer
# Multi-module project with TypeScript/JavaScript (Node.js Backend + React Frontend)
# IMPORTANT: Use CI-based analysis, not Automatic Analysis

# Project identification - MUST match your SonarCloud project
sonar.projectKey=julianrodriguez-Sofka_logistics-optimizer
sonar.organization=julianrodriguez-sofka
sonar.projectName=logistics-optimizer
sonar.projectVersion=2.0

# New Code Definition - Enable Quality Gate on main branch
# This makes SonarCloud compute Quality Gate for main (not just PRs)
# Uses "previous version" as reference - compares current analysis with last one
sonar.newCode.referenceBranch=main

# Source encoding
sonar.sourceEncoding=UTF-8

# Language
sonar.language=ts

# Source directories (relative paths from project root - ONLY SOURCE CODE)
# FOCUS: Backend only (domain, services, adapters, repositories)
# Frontend is excluded to focus Quality Gate on critical backend logic
sonar.sources=logistics-back/src/domain,\
  logistics-back/src/application/services,\
  logistics-back/src/application/utils,\
  logistics-back/src/infrastructure/adapters,\
  logistics-back/src/infrastructure/database/repositories,\
  logistics-back/src/infrastructure/controllers,\
  logistics-back/src/infrastructure/messaging

# Test directories
sonar.tests=logistics-back/src/__tests__

# Coverage reports (LCOV format for JavaScript/TypeScript)
# Only backend coverage (frontend excluded from analysis)
sonar.javascript.lcov.reportPaths=logistics-back/coverage/lcov.info

# Files to exclude from analysis
# Simplified since we're only analyzing specific backend folders
sonar.exclusions=**/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/__tests__/**,\
  **/*.spec.ts,\
  **/*.test.ts,\
  **/test/**,\
  **/mocks/**,\
  **/*.config.ts,\
  **/*.config.js,\
  **/*.d.ts

# Test file patterns
sonar.test.inclusions=**/__tests__/**/*.ts,\
  **/__tests__/**/*.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/*.test.ts,\
  **/*.test.tsx

# Files to exclude from coverage calculation
sonar.coverage.exclusions=**/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/__tests__/**,\
  **/*.spec.ts,\
  **/*.test.ts,\
  **/test/**,\
  **/mocks/**,\
  **/*.config.ts,\
  **/*.config.js

# Duplicate code detection exclusions
sonar.cpd.exclusions=**/__tests__/**,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/mocks/**

# Encoding
sonar.sourceEncoding=UTF-8

# Language settings - SonarCloud auto-detects TypeScript
# Note: Do NOT use sonar.typescript.tsconfigPath with multiple paths, SonarCloud handles this automatically
