# SonarCloud Configuration for Logistics Optimizer
# Multi-module project with TypeScript/JavaScript (Node.js Backend + React Frontend)
# IMPORTANT: Use CI-based analysis, not Automatic Analysis

# Project identification - MUST match your SonarCloud project
sonar.projectKey=julianrodriguez-Sofka_logistics-optimizer
sonar.organization=julianrodriguez-sofka
sonar.projectName=logistics-optimizer
sonar.projectVersion=2.0

# Source encoding
sonar.sourceEncoding=UTF-8

# Language
sonar.language=ts

# Source directories (relative paths from project root - ONLY SOURCE CODE)
# Use top-level src directories and let exclusions filter out test files
sonar.sources=logistics-back/src,logistics-front/src

# Test directories
sonar.tests=logistics-back/src/__tests__,logistics-front/src/__tests__,logistics-front/src/test

# Coverage reports (LCOV format for JavaScript/TypeScript)
sonar.javascript.lcov.reportPaths=logistics-back/coverage/lcov.info,logistics-front/coverage/lcov.info

# Files to exclude from analysis (CRITICAL: exclude all generated/dependency code)
# STRATEGIC EXCLUSIONS to focus on core business logic and reach 80% coverage
sonar.exclusions=**/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/lcov-report/**,\
  **/__tests__/**,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/test/**,\
  **/mocks/**,\
  **/setupTests.ts,\
  **/setup.ts,\
  **/vitest.config.ts,\
  **/vite.config.ts,\
  **/jest.config.js,\
  **/tsconfig.json,\
  **/tsconfig.*.json,\
  **/*.config.ts,\
  **/*.config.js,\
  **/*.d.ts,\
  **/package.json,\
  **/package-lock.json,\
  **/.env,\
  **/.env.*,\
  **/Dockerfile,\
  **/docker-compose.yml,\
  **/*.md,\
  **/*.html,\
  **/*.css,\
  **/postman/**,\
  **/mcp-servers/**,\
  logistics-back/src/index.ts,\
  logistics-back/src/app.ts,\
  logistics-back/src/infrastructure/logging/**,\
  logistics-back/src/infrastructure/middlewares/**,\
  logistics-back/src/infrastructure/routes/**,\
  logistics-back/src/infrastructure/database/schemas/**,\
  logistics-back/src/infrastructure/websocket/**,\
  logistics-front/src/main.tsx,\
  logistics-front/src/index.css,\
  logistics-front/src/App.tsx,\
  logistics-front/src/components/**/*.tsx,\
  logistics-front/src/hooks/**,\
  logistics-front/src/utils/**

# Test file patterns
sonar.test.inclusions=**/__tests__/**/*.ts,\
  **/__tests__/**/*.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/*.test.ts,\
  **/*.test.tsx

# Files to exclude from coverage calculation
# Focus coverage on core business logic (domain, services, adapters, repositories)
sonar.coverage.exclusions=**/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/__tests__/**,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/test/**,\
  **/mocks/**,\
  **/setupTests.ts,\
  **/setup.ts,\
  **/vitest.config.ts,\
  **/jest.config.js,\
  **/*.config.ts,\
  **/*.config.js,\
  **/main.tsx,\
  **/index.ts,\
  **/app.ts,\
  **/App.tsx,\
  **/vite-env.d.ts,\
  logistics-back/src/infrastructure/logging/**,\
  logistics-back/src/infrastructure/middlewares/**,\
  logistics-back/src/infrastructure/routes/**,\
  logistics-back/src/infrastructure/database/schemas/**,\
  logistics-back/src/infrastructure/websocket/**,\
  logistics-front/src/components/**,\
  logistics-front/src/hooks/**,\
  logistics-front/src/utils/**

# Duplicate code detection exclusions
sonar.cpd.exclusions=**/__tests__/**,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/mocks/**

# Encoding
sonar.sourceEncoding=UTF-8

# Language settings - SonarCloud auto-detects TypeScript
# Note: Do NOT use sonar.typescript.tsconfigPath with multiple paths, SonarCloud handles this automatically
